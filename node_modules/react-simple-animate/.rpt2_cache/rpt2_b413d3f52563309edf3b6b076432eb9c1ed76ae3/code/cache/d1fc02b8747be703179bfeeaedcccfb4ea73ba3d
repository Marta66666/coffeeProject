{"code":"import * as React from 'react';\r\nimport { AnimateContext } from './animateGroup';\r\nimport msToSec from './utils/msToSec';\r\nconst { useEffect, useState, useRef, useContext } = React;\r\nexport default function Animate(props) {\r\n    const { play, children, render, start, end, complete = '', onComplete, delay = 0, duration = 0.3, easeType = 'linear', sequenceId, sequenceIndex, } = props;\r\n    const onCompleteTimeRef = useRef({});\r\n    const [style, setStyle] = useState(start);\r\n    const { register, animationStates = {} } = useContext(AnimateContext);\r\n    const id = (sequenceIndex && sequenceIndex >= 0 ? sequenceIndex : sequenceId) || 0;\r\n    useEffect(() => {\r\n        if (sequenceIndex && sequenceIndex >= 0 || sequenceId)\r\n            register(props);\r\n    }, []);\r\n    useEffect(() => {\r\n        setStyle(Object.assign({}, (play || (animationStates[id] || {}).play ? end : start), { transition: `all ${duration}s ${easeType} ${parseFloat((animationStates[id] || {}).delay || delay)}s` }));\r\n        if (play && (complete || onComplete)) {\r\n            onCompleteTimeRef.current = setTimeout(() => {\r\n                complete && setStyle(complete);\r\n                onComplete && onComplete();\r\n            }, msToSec(parseFloat((animationStates[id] || {}).delay || delay) + duration));\r\n        }\r\n        return () => {\r\n            if (onCompleteTimeRef.current) {\r\n                // @ts-ignore\r\n                clearTimeout(onCompleteTimeRef.current);\r\n            }\r\n        };\r\n    }, [id, animationStates, play, duration, easeType, delay, onComplete, start, end, complete]);\r\n    // @ts-ignore\r\n    return render ? render({ style }) : React.createElement(\"div\", { style: style }, children);\r\n}\r\n//# sourceMappingURL=animate.js.map","map":"{\"version\":3,\"file\":\"animate.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/animate.tsx\"],\"names\":[],\"mappings\":\"AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,cAAc,EAAE,MAAM,gBAAgB,CAAC;AAChD,OAAO,OAAO,MAAM,iBAAiB,CAAC;AAGtC,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,KAAK,CAAC;AAQ1D,MAAM,CAAC,OAAO,UAAU,OAAO,CAAC,KAAY;IAC1C,MAAM,EACJ,IAAI,EACJ,QAAQ,EACR,MAAM,EACN,KAAK,EACL,GAAG,EACH,QAAQ,GAAG,EAAE,EACb,UAAU,EACV,KAAK,GAAG,CAAC,EACT,QAAQ,GAAG,GAAG,EACd,QAAQ,GAAG,QAAQ,EACnB,UAAU,EACV,aAAa,GACd,GAAG,KAAK,CAAC;IACV,MAAM,iBAAiB,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC;IACrC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAC1C,MAAM,EAAE,QAAQ,EAAE,eAAe,GAAG,EAAE,EAAE,GAAG,UAAU,CAAC,cAAc,CAAC,CAAC;IACtE,MAAM,EAAE,GAAG,CAAC,aAAa,IAAI,aAAa,IAAI,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IAEnF,SAAS,CAAC,GAAS,EAAE;QACnB,IAAI,aAAa,IAAI,aAAa,IAAI,CAAC,IAAI,UAAU;YAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;IACzE,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,SAAS,CACP,GAAQ,EAAE;QACR,QAAQ,mBACH,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,IAC3D,UAAU,EAAE,OAAO,QAAQ,KAAK,QAAQ,IAAI,UAAU,CAAC,CAAC,eAAe,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,GAAG,IACrG,CAAC;QAEH,IAAI,IAAI,IAAI,CAAC,QAAQ,IAAI,UAAU,CAAC,EAAE;YACpC,iBAAiB,CAAC,OAAO,GAAG,UAAU,CAAC,GAAS,EAAE;gBAChD,QAAQ,IAAI,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBAC/B,UAAU,IAAI,UAAU,EAAE,CAAC;YAC7B,CAAC,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC,eAAe,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;SAChF;QAED,OAAO,GAAS,EAAE;YAChB,IAAI,iBAAiB,CAAC,OAAO,EAAE;gBAC7B,aAAa;gBACb,YAAY,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;aACzC;QACH,CAAC,CAAC;IACJ,CAAC,EACD,CAAC,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,CACzF,CAAC;IAEF,aAAa;IACb,OAAO,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,6BAAK,KAAK,EAAE,KAAK,IAAG,QAAQ,CAAO,CAAC;AAC1E,CAAC\"}","dts":{"name":"/Users/bill/git/react-simple-animate/animate.d.ts","writeByteOrderMark":false,"text":"import { AnimationStateType, AnimationType, Style } from './types';\r\nexport declare type Props = {\r\n    complete?: Style;\r\n    onComplete?: () => void;\r\n    animationStates?: AnimationStateType;\r\n} & AnimationType;\r\nexport default function Animate(props: Props): any;\r\n"}}
