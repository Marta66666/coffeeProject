{"code":"import { useEffect, useState, useRef } from 'react';\r\nimport createRandomName from './utils/createRandomName';\r\nimport calculateTotalDuration from './utils/calculateTotalDuration';\r\nimport createTag from './logic/createTag';\r\nimport deleteRules from './logic/deleteRules';\r\nfunction createArrayWithNumbers(length) {\r\n    return Array.from({ length }, () => null);\r\n}\r\nexport default function useAnimateGroup(props) {\r\n    const { sequences = [] } = props;\r\n    const defaultArray = createArrayWithNumbers(sequences.length);\r\n    const [styles, setStyles] = useState(defaultArray);\r\n    const [isPlaying, setPlaying] = useState(false);\r\n    const animationNamesRef = useRef([]);\r\n    const styleTagRef = useRef([]);\r\n    useEffect(() => {\r\n        sequences.forEach(({ keyframes = false }, i) => {\r\n            if (!Array.isArray(keyframes))\r\n                return;\r\n            if (!animationNamesRef.current[i]) {\r\n                animationNamesRef.current[i] = {};\r\n                styleTagRef.current[i] = {};\r\n            }\r\n            animationNamesRef.current[i].forward = createRandomName();\r\n            let result = createTag({\r\n                animationName: animationNamesRef.current[i].forward,\r\n                keyframes,\r\n            });\r\n            styleTagRef.current[i].forward = result.styleTag;\r\n            animationNamesRef.current[i].reverse = createRandomName();\r\n            result = createTag({\r\n                animationName: animationNamesRef.current[i].reverse,\r\n                keyframes: keyframes.reverse(),\r\n            });\r\n            styleTagRef.current[i].reverse = result.styleTag;\r\n        });\r\n        return () => {\r\n            Object.values(animationNamesRef).forEach(({ forward, reverse }, i) => {\r\n                if (!styleTagRef[i])\r\n                    return;\r\n                deleteRules(styleTagRef[i].sheet, forward);\r\n                deleteRules(styleTagRef[i].sheet, reverse);\r\n            });\r\n        };\r\n    }, []);\r\n    const play = (isPlay) => {\r\n        let totalDuration = 0;\r\n        const animationRefWithOrder = isPlay ? animationNamesRef.current : [...animationNamesRef.current].reverse();\r\n        const styles = (isPlay ? sequences : [...sequences].reverse()).map((current, currentIndex) => {\r\n            const { duration = 0.3, delay = 0, overlay, keyframes, iterationCount = 1, easeType = 'linear', direction = 'normal', fillMode = 'none', end = {}, start = {}, } = current;\r\n            const delayDuration = currentIndex === 0 ? delay : totalDuration;\r\n            const transition = `all ${duration}s ${easeType} ${delayDuration}s`;\r\n            totalDuration = calculateTotalDuration({ duration, delay, overlay }) + totalDuration;\r\n            return keyframes\r\n                ? {\r\n                    animation: `${duration}s ${easeType} ${delayDuration}s ${iterationCount} ${direction} ${fillMode} running ${isPlay ? animationRefWithOrder[currentIndex].forward : animationRefWithOrder[currentIndex].reverse}`,\r\n                }\r\n                : Object.assign({}, (isPlay ? end : start), { transition });\r\n        });\r\n        // @ts-ignore\r\n        setStyles(isPlay ? styles : [...styles].reverse());\r\n        setPlaying(!isPlaying);\r\n    };\r\n    return { styles, play, isPlaying };\r\n}\r\n//# sourceMappingURL=useAnimateGroup.js.map","map":"{\"version\":3,\"file\":\"useAnimateGroup.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/useAnimateGroup.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/bill/git/react-simple-animate/useAnimateGroup.d.ts","writeByteOrderMark":false,"text":"import { HookSequences } from './types';\r\ninterface Props {\r\n    sequences: HookSequences;\r\n}\r\nexport default function useAnimateGroup(props: Props): {\r\n    styles: null[];\r\n    play: (isPlay: boolean) => void;\r\n    isPlaying: boolean;\r\n};\r\nexport {};\r\n"}}
