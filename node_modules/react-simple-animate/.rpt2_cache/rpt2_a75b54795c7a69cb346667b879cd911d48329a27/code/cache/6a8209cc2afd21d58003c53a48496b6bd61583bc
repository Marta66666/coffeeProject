{"code":"import * as React from 'react';\r\nimport createTag from './logic/createTag';\r\nimport createRandomName from './utils/createRandomName';\r\nimport deleteRule from './logic/deleteRules';\r\nimport { AnimateContext } from './animateGroup';\r\nimport getSequenceId from './utils/getSequenceId';\r\nimport getPlayState from './utils/getPauseState';\r\nconst { useRef, useEffect, useContext, useState } = React;\r\nexport default function AnimateKeyframes(props) {\r\n    const { children, play = false, pause = false, render, duration = 0.3, delay = 0, easeType = 'linear', direction = 'normal', fillMode = 'none', iterationCount = 1, sequenceIndex, keyframes, sequenceId, } = props;\r\n    const animationNameRef = useRef({\r\n        forward: '',\r\n        reverse: '',\r\n    });\r\n    const controlled = useRef(false);\r\n    const styleTagRef = useRef({\r\n        forward: { sheet: {} },\r\n        reverse: { sheet: {} },\r\n    });\r\n    const id = getSequenceId(sequenceIndex, sequenceId);\r\n    const { register, animationStates = {} } = useContext(AnimateContext);\r\n    const forceUpdate = useState(false)[1];\r\n    useEffect(() => {\r\n        animationNameRef.current.forward = createRandomName();\r\n        let result = createTag({\r\n            animationName: animationNameRef.current.forward,\r\n            keyframes,\r\n        });\r\n        styleTagRef.current.forward = result.styleTag;\r\n        animationNameRef.current.reverse = createRandomName();\r\n        result = createTag({\r\n            animationName: animationNameRef.current.reverse,\r\n            keyframes: keyframes.reverse(),\r\n        });\r\n        styleTagRef.current.reverse = result.styleTag;\r\n        register(props);\r\n        if (play)\r\n            forceUpdate(true);\r\n        return () => {\r\n            deleteRule(styleTagRef.current.forward.sheet, animationNameRef.current.forward);\r\n            deleteRule(styleTagRef.current.reverse.sheet, animationNameRef.current.reverse);\r\n        };\r\n    }, []);\r\n    const animateState = animationStates[id] || {};\r\n    let pauseValue = false;\r\n    if (animateState.controlled && !controlled.current) {\r\n        pauseValue = animateState.pause;\r\n        if (!animateState.pause)\r\n            controlled.current = true;\r\n    }\r\n    else {\r\n        pauseValue = pause;\r\n    }\r\n    const style = {\r\n        animation: `${duration}s ${easeType} ${animateState.delay ||\r\n            delay}s ${iterationCount} ${direction} ${fillMode} ${getPlayState(pauseValue)} ${((animateState.controlled\r\n            ? animateState.play\r\n            : play)\r\n            ? animationNameRef.current.forward\r\n            : animationNameRef.current.reverse) || ''}`,\r\n    };\r\n    return render ? render({ style }) : React.createElement(\"div\", { style: style || {} }, children);\r\n}\r\n//# sourceMappingURL=animateKeyframes.js.map","map":"{\"version\":3,\"file\":\"animateKeyframes.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/animateKeyframes.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/bill/git/react-simple-animate/animateKeyframes.d.ts","writeByteOrderMark":false,"text":"import { AnimateKeyframesProps } from './types';\r\nexport default function AnimateKeyframes(props: AnimateKeyframesProps): any;\r\n"}}
